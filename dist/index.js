/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bcrypt");

/***/ }),

/***/ "cookie-parser":
/*!********************************!*\
  !*** external "cookie-parser" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("cookie-parser");

/***/ }),

/***/ "cors":
/*!***********************!*\
  !*** external "cors" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("cors");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dayjs":
/*!************************!*\
  !*** external "dayjs" ***!
  \************************/
/***/ ((module) => {

module.exports = require("dayjs");

/***/ }),

/***/ "dotenv/config.js":
/*!***********************************!*\
  !*** external "dotenv/config.js" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("dotenv/config.js");

/***/ }),

/***/ "express":
/*!**************************!*\
  !*** external "express" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("express");

/***/ }),

/***/ "fs-extra":
/*!***************************!*\
  !*** external "fs-extra" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("fs-extra");

/***/ }),

/***/ "http-status-codes":
/*!************************************!*\
  !*** external "http-status-codes" ***!
  \************************************/
/***/ ((module) => {

module.exports = require("http-status-codes");

/***/ }),

/***/ "joi":
/*!**********************!*\
  !*** external "joi" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("joi");

/***/ }),

/***/ "joi/lib/errors.js":
/*!************************************!*\
  !*** external "joi/lib/errors.js" ***!
  \************************************/
/***/ ((module) => {

module.exports = require("joi/lib/errors.js");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "multer":
/*!*************************!*\
  !*** external "multer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("multer");

/***/ }),

/***/ "nanoid":
/*!*************************!*\
  !*** external "nanoid" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("nanoid");

/***/ }),

/***/ "nodemailer":
/*!*****************************!*\
  !*** external "nodemailer" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("nodemailer");

/***/ }),

/***/ "otplib":
/*!*************************!*\
  !*** external "otplib" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("otplib");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "./controllers/book/index.js":
/*!***********************************!*\
  !*** ./controllers/book/index.js ***!
  \***********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBook: () => (/* binding */ createBook),\n/* harmony export */   deleteBook: () => (/* binding */ deleteBook),\n/* harmony export */   getAllBooks: () => (/* binding */ getAllBooks),\n/* harmony export */   getBook: () => (/* binding */ getBook),\n/* harmony export */   getCurrentlyReadingBooks: () => (/* binding */ getCurrentlyReadingBooks),\n/* harmony export */   getToReadBooks: () => (/* binding */ getToReadBooks)\n/* harmony export */ });\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var http_status_codes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! http-status-codes */ \"http-status-codes\");\n/* harmony import */ var joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! joi/lib/errors.js */ \"joi/lib/errors.js\");\n/* harmony import */ var _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../helpers/custom_error.js */ \"./helpers/custom_error.js\");\n/* harmony import */ var _helpers_date_time_helper_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../helpers/date_time_helper.js */ \"./helpers/date_time_helper.js\");\n/* harmony import */ var _helpers_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../helpers/index.js */ \"./helpers/index.js\");\n/* harmony import */ var _models_BookModel_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../models/BookModel.js */ \"./models/BookModel.js\");\n/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utils/index.js */ \"./utils/index.js\");\n/* harmony import */ var _validations_book_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../validations/book/index.js */ \"./validations/book/index.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\n\n\n\n\n\n\n\n\n// create\n// method: POST\n// url: /api/book\nvar createBook = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var _req$user, file, newBook;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          file = req === null || req === void 0 ? void 0 : req.file;\n          if (file) {\n            _context.next = 4;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_3__.CustomError(\"No book was uploaded\");\n        case 4:\n          newBook = {\n            name: file === null || file === void 0 ? void 0 : file.originalname,\n            bookPath: file === null || file === void 0 ? void 0 : file.path,\n            created_at: (0,_helpers_date_time_helper_js__WEBPACK_IMPORTED_MODULE_4__.getCurrentUnix)(),\n            updated_at: (0,_helpers_date_time_helper_js__WEBPACK_IMPORTED_MODULE_4__.getCurrentUnix)(),\n            created_by: req === null || req === void 0 || (_req$user = req.user) === null || _req$user === void 0 ? void 0 : _req$user._id\n          };\n          _context.next = 7;\n          return _models_BookModel_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].create(newBook);\n        case 7:\n          return _context.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.OK).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.OK, \"Book uploaded successfully\", 1)));\n        case 10:\n          _context.prev = 10;\n          _context.t0 = _context[\"catch\"](0);\n          if (!(_context.t0 instanceof joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_2__.ValidationError || _context.t0 instanceof _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_3__.CustomError)) {\n            _context.next = 14;\n            break;\n          }\n          return _context.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.BAD_REQUEST).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.BAD_REQUEST, _context.t0.message, 0)));\n        case 14:\n          console.error(_context.t0);\n          return _context.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.INTERNAL_SERVER_ERROR).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.INTERNAL_SERVER_ERROR, \"Internal Server Error\", 0)));\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 10]]);\n  }));\n  return function createBook(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n// hard-delete\n// method: DELETE\n// url: /api/book/:id\nvar deleteBook = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    var _req$params, _req$user2, book, filePath, _req$params2, _req$user3;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return _validations_book_index_js__WEBPACK_IMPORTED_MODULE_8__.deleteBookValidation.validateAsync(req === null || req === void 0 ? void 0 : req.params);\n        case 3:\n          _context2.next = 5;\n          return _models_BookModel_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findOne({\n            _id: req === null || req === void 0 || (_req$params = req.params) === null || _req$params === void 0 ? void 0 : _req$params.id,\n            created_by: req === null || req === void 0 || (_req$user2 = req.user) === null || _req$user2 === void 0 ? void 0 : _req$user2._id\n          });\n        case 5:\n          book = _context2.sent;\n          if (book) {\n            _context2.next = 8;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_3__.CustomError(\"Book not found\");\n        case 8:\n          filePath = book === null || book === void 0 ? void 0 : book.bookPath;\n          _context2.prev = 9;\n          _context2.next = 12;\n          return fs.remove(filePath);\n        case 12:\n          _context2.next = 14;\n          return _models_BookModel_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].deleteOne({\n            _id: req === null || req === void 0 || (_req$params2 = req.params) === null || _req$params2 === void 0 ? void 0 : _req$params2.id,\n            created_by: req === null || req === void 0 || (_req$user3 = req.user) === null || _req$user3 === void 0 ? void 0 : _req$user3._id\n          });\n        case 14:\n          _context2.next = 19;\n          break;\n        case 16:\n          _context2.prev = 16;\n          _context2.t0 = _context2[\"catch\"](9);\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_3__.CustomError(\"Failed to delete book\");\n        case 19:\n          return _context2.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.OK).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.OK, \"Book deleted successfully\", 1)));\n        case 22:\n          _context2.prev = 22;\n          _context2.t1 = _context2[\"catch\"](0);\n          if (!(_context2.t1 instanceof joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_2__.ValidationError || _context2.t1 instanceof _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_3__.CustomError)) {\n            _context2.next = 26;\n            break;\n          }\n          return _context2.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.BAD_REQUEST).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.BAD_REQUEST, _context2.t1.message, 0)));\n        case 26:\n          console.error(_context2.t1);\n          return _context2.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.INTERNAL_SERVER_ERROR).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.INTERNAL_SERVER_ERROR, \"Internal Server Error\", 0)));\n        case 28:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 22], [9, 16]]);\n  }));\n  return function deleteBook(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\n// read\n// method: GET\n// url: /api/book/:id\nvar getBook = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res) {\n    var _req$params3, _req$user4, book;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return _validations_book_index_js__WEBPACK_IMPORTED_MODULE_8__.getBookValidation.validateAsync(req === null || req === void 0 ? void 0 : req.params);\n        case 3:\n          _context3.next = 5;\n          return _models_BookModel_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findOne({\n            _id: req === null || req === void 0 || (_req$params3 = req.params) === null || _req$params3 === void 0 ? void 0 : _req$params3.id,\n            created_by: req === null || req === void 0 || (_req$user4 = req.user) === null || _req$user4 === void 0 ? void 0 : _req$user4._id\n          });\n        case 5:\n          book = _context3.sent;\n          if (book) {\n            _context3.next = 8;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_3__.CustomError(\"Book not found\");\n        case 8:\n          book.lastReadAt = (0,_helpers_date_time_helper_js__WEBPACK_IMPORTED_MODULE_4__.getCurrentUnix)();\n          book.save();\n          return _context3.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.OK).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)(book._doc, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.OK, \"Book uploaded successfully\", 1)));\n        case 13:\n          _context3.prev = 13;\n          _context3.t0 = _context3[\"catch\"](0);\n          if (!(_context3.t0 instanceof joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_2__.ValidationError || _context3.t0 instanceof _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_3__.CustomError)) {\n            _context3.next = 17;\n            break;\n          }\n          return _context3.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.BAD_REQUEST).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.BAD_REQUEST, _context3.t0.message, 0)));\n        case 17:\n          console.error(_context3.t0);\n          return _context3.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.INTERNAL_SERVER_ERROR).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.INTERNAL_SERVER_ERROR, \"Internal Server Error\", 0)));\n        case 19:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 13]]);\n  }));\n  return function getBook(_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\n// get-all-books\n// method: GET\n// url: /api/book/all\n// PAGINATION: ENABLED\n// QUERY: PARAMS:: search, limit, offset, sort\nvar getAllBooks = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res) {\n    var _req$user5, _req$query, _paginate, sort, offset, limit, where, books, total_count;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _paginate = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_7__.paginate)(req === null || req === void 0 ? void 0 : req.query), sort = _paginate.sort, offset = _paginate.offset, limit = _paginate.limit;\n          where = {\n            created_by: req === null || req === void 0 || (_req$user5 = req.user) === null || _req$user5 === void 0 ? void 0 : _req$user5._id\n          };\n          if (req !== null && req !== void 0 && (_req$query = req.query) !== null && _req$query !== void 0 && _req$query.search) where.name = new RegExp(req.query.search.toString(), \"i\");\n          _context4.next = 6;\n          return _models_BookModel_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].find(where).sort(sort).skip(offset).limit(limit).lean().exec();\n        case 6:\n          books = _context4.sent;\n          if (books) {\n            _context4.next = 9;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_3__.CustomError(\"Failed to get books\");\n        case 9:\n          _context4.next = 11;\n          return _models_BookModel_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].countDocuments(where);\n        case 11:\n          total_count = _context4.sent;\n          return _context4.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.OK).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({\n            paginatedData: books,\n            totalCount: total_count,\n            itemsPerPage: limit\n          }, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.OK, \"Success\", 1)));\n        case 15:\n          _context4.prev = 15;\n          _context4.t0 = _context4[\"catch\"](0);\n          if (!(_context4.t0 instanceof joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_2__.ValidationError || _context4.t0 instanceof _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_3__.CustomError)) {\n            _context4.next = 19;\n            break;\n          }\n          return _context4.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.BAD_REQUEST).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.BAD_REQUEST, _context4.t0.message, 0)));\n        case 19:\n          console.error(_context4.t0);\n          return _context4.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.INTERNAL_SERVER_ERROR).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.INTERNAL_SERVER_ERROR, \"Internal Server Error\", 0)));\n        case 21:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[0, 15]]);\n  }));\n  return function getAllBooks(_x7, _x8) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\n// get-currently-reading-books\n// method: GET\n// url: /api/book/currently-reading\n// PAGINATION: ENABLED\n// QUERY: PARAMS:: limit, offset, sort\nvar getCurrentlyReadingBooks = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(req, res) {\n    var currentUnix, fiveDaysAgoUnix, _paginate2, sort, offset, limit, where, books, total_count;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.prev = 0;\n          currentUnix = (0,_helpers_date_time_helper_js__WEBPACK_IMPORTED_MODULE_4__.getCurrentUnix)();\n          fiveDaysAgoUnix = dayjs__WEBPACK_IMPORTED_MODULE_0__().subtract(5, \"day\").unix();\n          _paginate2 = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_7__.paginate)(req === null || req === void 0 ? void 0 : req.query), sort = _paginate2.sort, offset = _paginate2.offset, limit = _paginate2.limit;\n          where = {\n            lastReadAt: {\n              $gte: fiveDaysAgoUnix,\n              $lte: currentUnix\n            }\n          };\n          _context5.next = 7;\n          return _models_BookModel_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].find(where).sort(sort).skip(offset).limit(limit).lean().exec();\n        case 7:\n          books = _context5.sent;\n          _context5.next = 10;\n          return _models_BookModel_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].countDocuments(where);\n        case 10:\n          total_count = _context5.sent;\n          return _context5.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.OK).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({\n            paginatedData: books,\n            totalCount: total_count,\n            itemsPerPage: limit\n          }, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.OK, \"Success\", 1)));\n        case 14:\n          _context5.prev = 14;\n          _context5.t0 = _context5[\"catch\"](0);\n          if (!(_context5.t0 instanceof joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_2__.ValidationError || _context5.t0 instanceof _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_3__.CustomError)) {\n            _context5.next = 18;\n            break;\n          }\n          return _context5.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.BAD_REQUEST).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.BAD_REQUEST, _context5.t0.message, 0)));\n        case 18:\n          console.error(_context5.t0);\n          return _context5.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.INTERNAL_SERVER_ERROR).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.INTERNAL_SERVER_ERROR, \"Internal Server Error\", 0)));\n        case 20:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5, null, [[0, 14]]);\n  }));\n  return function getCurrentlyReadingBooks(_x9, _x10) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\n// get-to-read-books\n// method: GET\n// url: /api/book/to-read\n// PAGINATION: ENABLED\n// QUERY: PARAMS:: limit, offset, sort\nvar getToReadBooks = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(req, res) {\n    var fiveDaysAgoUnix, _paginate3, sort, offset, limit, where, books, total_count;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.prev = 0;\n          fiveDaysAgoUnix = dayjs__WEBPACK_IMPORTED_MODULE_0__().subtract(5, \"day\").unix();\n          _paginate3 = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_7__.paginate)(req === null || req === void 0 ? void 0 : req.query), sort = _paginate3.sort, offset = _paginate3.offset, limit = _paginate3.limit;\n          where = {\n            lastReadAt: {\n              $lt: fiveDaysAgoUnix\n            }\n          };\n          _context6.next = 6;\n          return _models_BookModel_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].find(where).sort(sort).skip(offset).limit(limit).lean().exec();\n        case 6:\n          books = _context6.sent;\n          _context6.next = 9;\n          return _models_BookModel_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].countDocuments(where);\n        case 9:\n          total_count = _context6.sent;\n          return _context6.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.OK).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({\n            paginatedData: books,\n            totalCount: total_count,\n            itemsPerPage: limit\n          }, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.OK, \"Success\", 1)));\n        case 13:\n          _context6.prev = 13;\n          _context6.t0 = _context6[\"catch\"](0);\n          if (!(_context6.t0 instanceof joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_2__.ValidationError || _context6.t0 instanceof _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_3__.CustomError)) {\n            _context6.next = 17;\n            break;\n          }\n          return _context6.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.BAD_REQUEST).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.BAD_REQUEST, _context6.t0.message, 0)));\n        case 17:\n          console.error(_context6.t0);\n          return _context6.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.INTERNAL_SERVER_ERROR).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_1__.StatusCodes.INTERNAL_SERVER_ERROR, \"Internal Server Error\", 0)));\n        case 19:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6, null, [[0, 13]]);\n  }));\n  return function getToReadBooks(_x11, _x12) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\n//# sourceURL=webpack://epub_reader_backend/./controllers/book/index.js?");

/***/ }),

/***/ "./controllers/user/index.js":
/*!***********************************!*\
  !*** ./controllers/user/index.js ***!
  \***********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createNewUser: () => (/* binding */ createNewUser),\n/* harmony export */   deleteUser: () => (/* binding */ deleteUser),\n/* harmony export */   generateForgetPasswordRequest: () => (/* binding */ generateForgetPasswordRequest),\n/* harmony export */   getUser: () => (/* binding */ getUser),\n/* harmony export */   loginUser: () => (/* binding */ loginUser),\n/* harmony export */   updateUser: () => (/* binding */ updateUser),\n/* harmony export */   validateForgetPasswordRequest: () => (/* binding */ validateForgetPasswordRequest)\n/* harmony export */ });\n/* harmony import */ var http_status_codes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! http-status-codes */ \"http-status-codes\");\n/* harmony import */ var joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! joi/lib/errors.js */ \"joi/lib/errors.js\");\n/* harmony import */ var _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../helpers/custom_error.js */ \"./helpers/custom_error.js\");\n/* harmony import */ var _helpers_date_time_helper_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../helpers/date_time_helper.js */ \"./helpers/date_time_helper.js\");\n/* harmony import */ var _helpers_email_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../helpers/email.js */ \"./helpers/email.js\");\n/* harmony import */ var _helpers_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../helpers/index.js */ \"./helpers/index.js\");\n/* harmony import */ var _helpers_jwt_helper_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../helpers/jwt_helper.js */ \"./helpers/jwt_helper.js\");\n/* harmony import */ var _helpers_totp_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../helpers/totp.js */ \"./helpers/totp.js\");\n/* harmony import */ var _models_UserModel_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../models/UserModel.js */ \"./models/UserModel.js\");\n/* harmony import */ var _validations_user_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../validations/user/index.js */ \"./validations/user/index.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\n\n\n\n\n\n\n\n\n\n// forget password\n// method: POST\n// url: /api/user/forgetPassword\nvar generateForgetPasswordRequest = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var _req$body, _req$body2, userData, token, encToken, secret, _generateTOTP, code, newOtpSecret;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _models_UserModel_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].findOne({\n            email: req === null || req === void 0 || (_req$body = req.body) === null || _req$body === void 0 ? void 0 : _req$body.email,\n            isDeleted: false\n          });\n        case 3:\n          userData = _context.sent;\n          if (userData) {\n            _context.next = 6;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError(\"User with the given email or phone number does not exist\");\n        case 6:\n          token = (0,_helpers_jwt_helper_js__WEBPACK_IMPORTED_MODULE_6__.getJwt)({\n            _id: userData._id\n          }, {\n            expiresIn: \"60m\"\n          });\n          encToken = (0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.encryptData)(token);\n          secret = (0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.generateSecret)(32);\n          _generateTOTP = (0,_helpers_totp_js__WEBPACK_IMPORTED_MODULE_7__.generateTOTP)(secret, \"RESET_PASS\"), code = _generateTOTP.code, newOtpSecret = _generateTOTP.newOtpSecret; // store OTP secret in DB\n          userData.otpSecret = newOtpSecret;\n          userData.save();\n          (0,_helpers_email_js__WEBPACK_IMPORTED_MODULE_4__.mailHandler)(\"RESET_PASS\", {\n            otp: code,\n            email: req === null || req === void 0 || (_req$body2 = req.body) === null || _req$body2 === void 0 ? void 0 : _req$body2.email\n          });\n          return _context.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.OK).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({\n            token: encToken,\n            otp: code\n          }, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.OK, \"Mail sent successfully\", 1)));\n        case 16:\n          _context.prev = 16;\n          _context.t0 = _context[\"catch\"](0);\n          if (!(_context.t0 instanceof joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_1__.ValidationError || _context.t0 instanceof _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError)) {\n            _context.next = 20;\n            break;\n          }\n          return _context.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST, _context.t0.message, 0)));\n        case 20:\n          console.error(_context.t0);\n          return _context.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR, \"Internal Server Error\", 0)));\n        case 22:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 16]]);\n  }));\n  return function generateForgetPasswordRequest(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n// forget password\n// method: POST\n// url: /api/user/resetPassword\nvar validateForgetPasswordRequest = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    var _req$body3, otp, token, new_password, compare_password, jwtToken, tokenData, user, isValid, passwordHash;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _req$body3 = req.body, otp = _req$body3.otp, token = _req$body3.token, new_password = _req$body3.new_password, compare_password = _req$body3.compare_password;\n          jwtToken = (0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.decryptData)(token);\n          _context2.next = 5;\n          return (0,_helpers_jwt_helper_js__WEBPACK_IMPORTED_MODULE_6__.verifyJwt)(jwtToken);\n        case 5:\n          tokenData = _context2.sent;\n          if (!((tokenData === null || tokenData === void 0 ? void 0 : tokenData.exp) < (0,_helpers_date_time_helper_js__WEBPACK_IMPORTED_MODULE_3__.getCurrentUnix)())) {\n            _context2.next = 8;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError(\"Token expired, please generate a new token\");\n        case 8:\n          _context2.next = 10;\n          return _models_UserModel_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].findById(tokenData === null || tokenData === void 0 ? void 0 : tokenData._id);\n        case 10:\n          user = _context2.sent;\n          if (user) {\n            _context2.next = 13;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError(\"No user found\");\n        case 13:\n          if (user.otpSecret) {\n            _context2.next = 15;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError(\"No request for password reset found\");\n        case 15:\n          isValid = (0,_helpers_totp_js__WEBPACK_IMPORTED_MODULE_7__.verifyTotp)(user === null || user === void 0 ? void 0 : user.otpSecret, otp);\n          if (!(!isValid && !(isValid !== null && isValid !== void 0 && isValid.success))) {\n            _context2.next = 18;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError((isValid === null || isValid === void 0 ? void 0 : isValid.message) || \"Invalid OTP, please try again!\");\n        case 18:\n          if (!(new_password !== compare_password)) {\n            _context2.next = 20;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError(\"Passwords do not match\");\n        case 20:\n          _context2.next = 22;\n          return (0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.hashPassword)(new_password);\n        case 22:\n          passwordHash = _context2.sent;\n          // update the user document\n          user.password = passwordHash;\n          user.updated_at = (0,_helpers_date_time_helper_js__WEBPACK_IMPORTED_MODULE_3__.getCurrentUnix)();\n          user.save();\n          return _context2.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.OK).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.OK, \"Password updated successfully\", 1)));\n        case 29:\n          _context2.prev = 29;\n          _context2.t0 = _context2[\"catch\"](0);\n          if (!(_context2.t0 instanceof joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_1__.ValidationError || _context2.t0 instanceof _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError)) {\n            _context2.next = 33;\n            break;\n          }\n          return _context2.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST, _context2.t0.message, 0)));\n        case 33:\n          console.error(_context2.t0);\n          return _context2.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR, \"Internal Server Error\", 0)));\n        case 35:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 29]]);\n  }));\n  return function validateForgetPasswordRequest(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\n// login\n// method: POST\n// url: /api/user/login\nvar loginUser = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res) {\n    var _req$body4, _req$body5, _req$body6, userData, isValid, token, encToken;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return _validations_user_index_js__WEBPACK_IMPORTED_MODULE_9__.userLoginValidation.validateAsync(req === null || req === void 0 ? void 0 : req.body);\n        case 3:\n          _context3.next = 5;\n          return _models_UserModel_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].findOne({\n            $or: [{\n              email: req === null || req === void 0 || (_req$body4 = req.body) === null || _req$body4 === void 0 ? void 0 : _req$body4.eop\n            }, {\n              phone: req === null || req === void 0 || (_req$body5 = req.body) === null || _req$body5 === void 0 ? void 0 : _req$body5.eop\n            }],\n            isDeleted: false\n          }).lean().exec();\n        case 5:\n          userData = _context3.sent;\n          if (userData) {\n            _context3.next = 8;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError(\"User with the given email or phone number does not exist\");\n        case 8:\n          _context3.next = 10;\n          return (0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.comparePassword)(req === null || req === void 0 || (_req$body6 = req.body) === null || _req$body6 === void 0 ? void 0 : _req$body6.password, userData === null || userData === void 0 ? void 0 : userData.password);\n        case 10:\n          isValid = _context3.sent;\n          if (isValid) {\n            _context3.next = 13;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError(\"Credentials do not match, please try again!\");\n        case 13:\n          // generate a token\n          token = (0,_helpers_jwt_helper_js__WEBPACK_IMPORTED_MODULE_6__.getJwt)({\n            _id: userData === null || userData === void 0 ? void 0 : userData._id,\n            role: userData === null || userData === void 0 ? void 0 : userData.role\n          }); // encrypt the token\n          encToken = (0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.encryptData)(token); // set cookie\n          res.cookie(\"userToken\", encToken, {\n            httpOnly: true,\n            sameSite: \"strict\",\n            maxAge: 24 * 60 * 60 * 1000\n          });\n\n          // success message\n          return _context3.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.OK).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({\n            loginCompleted: true,\n            token: encToken\n          }, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.OK, \"Login Successful\", 1)));\n        case 19:\n          _context3.prev = 19;\n          _context3.t0 = _context3[\"catch\"](0);\n          if (!(_context3.t0 instanceof joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_1__.ValidationError || _context3.t0 instanceof _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError)) {\n            _context3.next = 23;\n            break;\n          }\n          return _context3.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST, _context3.t0.message, 0)));\n        case 23:\n          console.error(_context3.t0);\n          return _context3.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR, \"Internal Server Error\", 0)));\n        case 25:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 19]]);\n  }));\n  return function loginUser(_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\n// create\n// method: POST\n// url: /api/user\nvar createNewUser = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res) {\n    var _req$body7, _req$body8, _req$body9, isAvailable, hashedPass, newUser;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _context4.next = 3;\n          return _validations_user_index_js__WEBPACK_IMPORTED_MODULE_9__.createUserValidation.validateAsync(req.body);\n        case 3:\n          _context4.next = 5;\n          return _models_UserModel_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].findOne({\n            $or: [{\n              email: req === null || req === void 0 || (_req$body7 = req.body) === null || _req$body7 === void 0 ? void 0 : _req$body7.email\n            }, {\n              phone: req === null || req === void 0 || (_req$body8 = req.body) === null || _req$body8 === void 0 ? void 0 : _req$body8.phone\n            }]\n            // isDeleted: false,\n          });\n        case 5:\n          isAvailable = _context4.sent;\n          if (!isAvailable) {\n            _context4.next = 11;\n            break;\n          }\n          isAvailable.isDeleted = false;\n          isAvailable.updated_at = (0,_helpers_date_time_helper_js__WEBPACK_IMPORTED_MODULE_3__.getCurrentUnix)();\n          isAvailable.save();\n          return _context4.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.OK).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({\n            _id: isAvailable._id,\n            loginCompleted: false\n          }, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.OK, \"Deleted user recovered\", 1)));\n        case 11:\n          _context4.next = 13;\n          return (0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.hashPassword)(req === null || req === void 0 || (_req$body9 = req.body) === null || _req$body9 === void 0 ? void 0 : _req$body9.password, 10);\n        case 13:\n          hashedPass = _context4.sent;\n          _context4.next = 16;\n          return _models_UserModel_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].create(_objectSpread(_objectSpread({}, req.body), {}, {\n            password: hashedPass,\n            created_at: (0,_helpers_date_time_helper_js__WEBPACK_IMPORTED_MODULE_3__.getCurrentUnix)(),\n            updated_at: (0,_helpers_date_time_helper_js__WEBPACK_IMPORTED_MODULE_3__.getCurrentUnix)()\n          }));\n        case 16:\n          newUser = _context4.sent;\n          return _context4.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.OK).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({\n            _id: newUser._id,\n            loginCompleted: false\n          }, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.OK, \"User created. Please login to your account.\", 1)));\n        case 20:\n          _context4.prev = 20;\n          _context4.t0 = _context4[\"catch\"](0);\n          if (!(_context4.t0 instanceof joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_1__.ValidationError || _context4.t0 instanceof _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError)) {\n            _context4.next = 24;\n            break;\n          }\n          return _context4.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST, _context4.t0.message, 0)));\n        case 24:\n          console.error(_context4.t0);\n          return _context4.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR, \"Internal Server Error\", 0)));\n        case 26:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[0, 20]]);\n  }));\n  return function createNewUser(_x7, _x8) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\n// update\n// method: PUT\n// url: /api/user\nvar updateUser = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(req, res) {\n    var _req$body10, _req$body11, _req$body12, updatedUserData;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.prev = 0;\n          _context5.next = 3;\n          return _validations_user_index_js__WEBPACK_IMPORTED_MODULE_9__.updateUserValidation.validateAsync(req.body);\n        case 3:\n          _context5.next = 5;\n          return _models_UserModel_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].findOneAndUpdate({\n            $and: [{\n              email: req === null || req === void 0 || (_req$body10 = req.body) === null || _req$body10 === void 0 ? void 0 : _req$body10.email\n            }, {\n              phone: req === null || req === void 0 || (_req$body11 = req.body) === null || _req$body11 === void 0 ? void 0 : _req$body11.phone\n            }],\n            isDeleted: false\n          }, {\n            $set: {\n              name: req === null || req === void 0 || (_req$body12 = req.body) === null || _req$body12 === void 0 ? void 0 : _req$body12.name,\n              updated_at: (0,_helpers_date_time_helper_js__WEBPACK_IMPORTED_MODULE_3__.getCurrentUnix)()\n            }\n          }, {\n            \"new\": true\n          });\n        case 5:\n          updatedUserData = _context5.sent;\n          if (updatedUserData) {\n            _context5.next = 8;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError(\"User with the email or phone number does not exist.\");\n        case 8:\n          return _context5.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.OK).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.OK, \"User updated successfully!\", 1)));\n        case 11:\n          _context5.prev = 11;\n          _context5.t0 = _context5[\"catch\"](0);\n          if (!(_context5.t0 instanceof joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_1__.ValidationError || _context5.t0 instanceof _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError)) {\n            _context5.next = 15;\n            break;\n          }\n          return _context5.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST, _context5.t0.message, 0)));\n        case 15:\n          console.error(_context5.t0);\n          return _context5.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR, \"Internal Server Error\", 0)));\n        case 17:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5, null, [[0, 11]]);\n  }));\n  return function updateUser(_x9, _x10) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\n// delete\n// method: DELETE\n// url: /api/user\nvar deleteUser = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(req, res) {\n    var _req$body13, user;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.prev = 0;\n          _context6.next = 3;\n          return _validations_user_index_js__WEBPACK_IMPORTED_MODULE_9__.deleteUserValidation.validateAsync(req === null || req === void 0 ? void 0 : req.body);\n        case 3:\n          _context6.next = 5;\n          return _models_UserModel_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].findOne({\n            _id: req === null || req === void 0 || (_req$body13 = req.body) === null || _req$body13 === void 0 ? void 0 : _req$body13._id,\n            isDeleted: false\n          });\n        case 5:\n          user = _context6.sent;\n          if (user) {\n            _context6.next = 8;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError(\"User with the email or phone number does not exist\");\n        case 8:\n          // delete user\n          user.isDeleted = true;\n          user.updated_at = (0,_helpers_date_time_helper_js__WEBPACK_IMPORTED_MODULE_3__.getCurrentUnix)();\n          _context6.next = 12;\n          return user.save();\n        case 12:\n          return _context6.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.OK).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({\n            _id: user._id,\n            isDeleted: true\n          }, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.OK, \"We hope you come back to us.\", 1)));\n        case 15:\n          _context6.prev = 15;\n          _context6.t0 = _context6[\"catch\"](0);\n          if (!(_context6.t0 instanceof joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_1__.ValidationError || _context6.t0 instanceof _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError)) {\n            _context6.next = 19;\n            break;\n          }\n          return _context6.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST, _context6.t0.message, 0)));\n        case 19:\n          console.error(_context6.t0);\n          return _context6.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR, \"Internal Server Error\", 0)));\n        case 21:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6, null, [[0, 15]]);\n  }));\n  return function deleteUser(_x11, _x12) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\n// user_info\n// method: GET\n// url: /api/user/:id\nvar getUser = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(req, res) {\n    var _req$params, _req$params2, userData;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.prev = 0;\n          _context7.next = 3;\n          return _validations_user_index_js__WEBPACK_IMPORTED_MODULE_9__.getUserValidation.validateAsync({\n            id: req === null || req === void 0 || (_req$params = req.params) === null || _req$params === void 0 ? void 0 : _req$params.id\n          });\n        case 3:\n          _context7.next = 5;\n          return _models_UserModel_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].findOne({\n            _id: req === null || req === void 0 || (_req$params2 = req.params) === null || _req$params2 === void 0 ? void 0 : _req$params2.id,\n            isDeleted: false\n          }).lean().exec();\n        case 5:\n          userData = _context7.sent;\n          if (userData) {\n            _context7.next = 8;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError(\"The requested user does not exist\");\n        case 8:\n          return _context7.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.OK).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)(_objectSpread({}, userData), http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.OK, \"Success\", 1)));\n        case 11:\n          _context7.prev = 11;\n          _context7.t0 = _context7[\"catch\"](0);\n          if (!(_context7.t0 instanceof joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_1__.ValidationError || _context7.t0 instanceof _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError)) {\n            _context7.next = 15;\n            break;\n          }\n          return _context7.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST, _context7.t0.message, 0)));\n        case 15:\n          console.error(_context7.t0);\n          return _context7.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR, \"Internal Server Error\", 0)));\n        case 17:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7, null, [[0, 11]]);\n  }));\n  return function getUser(_x13, _x14) {\n    return _ref7.apply(this, arguments);\n  };\n}();\n\n//# sourceURL=webpack://epub_reader_backend/./controllers/user/index.js?");

/***/ }),

/***/ "./helpers/custom_error.js":
/*!*********************************!*\
  !*** ./helpers/custom_error.js ***!
  \*********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CustomError: () => (/* binding */ CustomError)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(t, e) { if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e; if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\"); return _assertThisInitialized(t); }\nfunction _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); return e; }\nfunction _inherits(t, e) { if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, \"prototype\", { writable: !1 }), e && _setPrototypeOf(t, e); }\nfunction _wrapNativeSuper(t) { var r = \"function\" == typeof Map ? new Map() : void 0; return _wrapNativeSuper = function _wrapNativeSuper(t) { if (null === t || !_isNativeFunction(t)) return t; if (\"function\" != typeof t) throw new TypeError(\"Super expression must either be null or a function\"); if (void 0 !== r) { if (r.has(t)) return r.get(t); r.set(t, Wrapper); } function Wrapper() { return _construct(t, arguments, _getPrototypeOf(this).constructor); } return Wrapper.prototype = Object.create(t.prototype, { constructor: { value: Wrapper, enumerable: !1, writable: !0, configurable: !0 } }), _setPrototypeOf(Wrapper, t); }, _wrapNativeSuper(t); }\nfunction _construct(t, e, r) { if (_isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments); var o = [null]; o.push.apply(o, e); var p = new (t.bind.apply(t, o))(); return r && _setPrototypeOf(p, r.prototype), p; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _isNativeFunction(t) { try { return -1 !== Function.toString.call(t).indexOf(\"[native code]\"); } catch (n) { return \"function\" == typeof t; } }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\nfunction _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }\nvar CustomError = /*#__PURE__*/function (_Error) {\n  function CustomError(message) {\n    var _this;\n    _classCallCheck(this, CustomError);\n    _this = _callSuper(this, CustomError, [message]);\n    _this.name = \"CustomError\";\n    return _this;\n  }\n  _inherits(CustomError, _Error);\n  return _createClass(CustomError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\n//# sourceURL=webpack://epub_reader_backend/./helpers/custom_error.js?");

/***/ }),

/***/ "./helpers/date_time_helper.js":
/*!*************************************!*\
  !*** ./helpers/date_time_helper.js ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCurrentUnix: () => (/* binding */ getCurrentUnix)\n/* harmony export */ });\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dotenv_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dotenv/config.js */ \"dotenv/config.js\");\n\n\nvar getCurrentUnix = function getCurrentUnix() {\n  return dayjs__WEBPACK_IMPORTED_MODULE_0__().unix().toString();\n};\n\n//# sourceURL=webpack://epub_reader_backend/./helpers/date_time_helper.js?");

/***/ }),

/***/ "./helpers/email.js":
/*!**************************!*\
  !*** ./helpers/email.js ***!
  \**************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mailHandler: () => (/* binding */ mailHandler)\n/* harmony export */ });\n/* harmony import */ var dotenv_config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv/config.js */ \"dotenv/config.js\");\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nodemailer */ \"nodemailer\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\nvar mailHandler = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(purpose, data) {\n    var transporter, mailOptions, info;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          transporter = nodemailer__WEBPACK_IMPORTED_MODULE_1__.createTransport({\n            service: \"gmail\",\n            port: 465,\n            secure: true,\n            auth: {\n              user: \"nirajkarde01@gmail.com\",\n              pass: \"zkyaihteezhlnffp\"\n            }\n          });\n          mailOptions = {\n            from: \"\\\"EPUB Reader\\\" <\".concat(\"nirajkarde01@gmail.com\", \">\"),\n            to: data.email,\n            subject: \"\",\n            text: \"\",\n            html: \"\"\n          };\n          _context.t0 = purpose;\n          _context.next = _context.t0 === \"RESET_PASS\" ? 6 : 10;\n          break;\n        case 6:\n          mailOptions.subject = \"Password Reset Request\";\n          mailOptions.text = \"Dear \".concat(data === null || data === void 0 ? void 0 : data.name, \",\\n\\nYou have requested to reset your password. Please use the following OTP to change your password:\\n\\nOTP: \").concat(data === null || data === void 0 ? void 0 : data.otp, \"\\n\\nIf you did not request a password reset, please ignore this email or contact support if you have any concerns.\\n\\nBest regards,\\nYour Company Name\");\n          mailOptions.html = \"\\n        <h1>Password Reset Request</h1>\\n        <p>Dear \".concat(data === null || data === void 0 ? void 0 : data.name, \",</p>\\n        <p>You have requested to reset your password. Please use the following OTP to change your password:</p>\\n        <h2 style=\\\"font-size: 24px; font-weight: bold;\\\">\").concat(data === null || data === void 0 ? void 0 : data.otp, \"</h2>\\n        <p>If you did not request a password reset, please ignore this email or contact support if you have any concerns.</p>\\n        <p>Best regards,<br>Your Company Name</p>\\n    \");\n          return _context.abrupt(\"break\", 14);\n        case 10:\n          mailOptions.subject = \"General Notification\";\n          mailOptions.text = \"This is a general notification.\";\n          mailOptions.html = \"\\n          <h1>General Notification</h1>\\n          This is a general notification message.\\n        \";\n          return _context.abrupt(\"break\", 14);\n        case 14:\n          _context.next = 16;\n          return transporter.sendMail(mailOptions);\n        case 16:\n          info = _context.sent;\n          console.log(\"Message sent: %s\", info.messageId);\n          _context.next = 23;\n          break;\n        case 20:\n          _context.prev = 20;\n          _context.t1 = _context[\"catch\"](0);\n          console.log(_context.t1);\n        case 23:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 20]]);\n  }));\n  return function mailHandler(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n//# sourceURL=webpack://epub_reader_backend/./helpers/email.js?");

/***/ }),

/***/ "./helpers/index.js":
/*!**************************!*\
  !*** ./helpers/index.js ***!
  \**************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   comparePassword: () => (/* binding */ comparePassword),\n/* harmony export */   decryptData: () => (/* binding */ decryptData),\n/* harmony export */   encryptData: () => (/* binding */ encryptData),\n/* harmony export */   generatePublicId: () => (/* binding */ generatePublicId),\n/* harmony export */   generateSecret: () => (/* binding */ generateSecret),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   responseGenerator: () => (/* binding */ responseGenerator)\n/* harmony export */ });\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var dotenv_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dotenv/config.js */ \"dotenv/config.js\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! nanoid */ \"nanoid\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\n\n\nvar key = Buffer.from(\"e1ac6534af494b8be98e93e2b5ea66d9a78a041080e9762f34737699d5863b6a\", \"hex\");\nvar iv = Buffer.from(\"3aaa20770fe0a3fded8246db9dbae135\", \"hex\");\nvar generateSecret = function generateSecret(bytes) {\n  return crypto__WEBPACK_IMPORTED_MODULE_1__.randomBytes(bytes).toString(\"hex\");\n};\nvar generatePublicId = function generatePublicId() {\n  return (0,nanoid__WEBPACK_IMPORTED_MODULE_3__.nanoid)() + (0,nanoid__WEBPACK_IMPORTED_MODULE_3__.nanoid)() + Date.now();\n};\nvar hashPassword = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(password) {\n    var saltRounds, salt;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          saltRounds = 10;\n          _context.next = 3;\n          return bcrypt__WEBPACK_IMPORTED_MODULE_0__.genSalt(saltRounds);\n        case 3:\n          salt = _context.sent;\n          return _context.abrupt(\"return\", bcrypt__WEBPACK_IMPORTED_MODULE_0__.hash(password, salt));\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function hashPassword(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar comparePassword = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(password, hash) {\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          return _context2.abrupt(\"return\", bcrypt__WEBPACK_IMPORTED_MODULE_0__.compare(password, hash));\n        case 1:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function comparePassword(_x2, _x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar encryptData = function encryptData(text) {\n  var cipher = crypto__WEBPACK_IMPORTED_MODULE_1__.createCipheriv(\"aes-256-cbc\", key, iv);\n  var encrypted = cipher.update(text, \"utf8\", \"hex\");\n  encrypted += cipher[\"final\"](\"hex\");\n  return encrypted;\n};\nvar decryptData = function decryptData(encryptedText) {\n  var decipher = crypto__WEBPACK_IMPORTED_MODULE_1__.createDecipheriv(\"aes-256-cbc\", key, iv);\n  var decrypted = decipher.update(encryptedText, \"hex\", \"utf8\");\n  decrypted += decipher[\"final\"](\"utf8\");\n  return decrypted;\n};\nfunction responseGenerator(responseData, responseStatusCode, responseStatusMsg, responseStatus) {\n  var responseJson = {\n    data: responseData,\n    code: responseStatusCode,\n    message: responseStatusMsg,\n    status: responseStatus,\n    timestamp: new Date()\n  };\n  return responseJson;\n}\n\n//# sourceURL=webpack://epub_reader_backend/./helpers/index.js?");

/***/ }),

/***/ "./helpers/jwt_helper.js":
/*!*******************************!*\
  !*** ./helpers/jwt_helper.js ***!
  \*******************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getJwt: () => (/* binding */ getJwt),\n/* harmony export */   verifyJwt: () => (/* binding */ verifyJwt)\n/* harmony export */ });\n/* harmony import */ var dotenv_config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv/config.js */ \"dotenv/config.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\nvar sign = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__.sign,\n  verify = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__.verify;\nfunction getJwt(data) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  try {\n    return sign(data, \"XxRihWpufjuzY60BYB0u11x9oUtZRzyscze23TRc\", options);\n  } catch (error) {\n    console.log(\"------------------------------------------------------------\");\n    console.log(\"Error while verifying JWT\", error);\n    console.log(\"------------------------------------------------------------\");\n  }\n}\nfunction verifyJwt(_x) {\n  return _verifyJwt.apply(this, arguments);\n}\nfunction _verifyJwt() {\n  _verifyJwt = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(authorization) {\n    var token;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return verify(authorization, \"XxRihWpufjuzY60BYB0u11x9oUtZRzyscze23TRc\");\n        case 3:\n          token = _context.sent;\n          console.log(token);\n          return _context.abrupt(\"return\", token);\n        case 8:\n          _context.prev = 8;\n          _context.t0 = _context[\"catch\"](0);\n          console.log(\"------------------------------------------------------------\");\n          console.log(\"Error while verifying JWT\", _context.t0);\n          console.log(\"------------------------------------------------------------\");\n        case 13:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 8]]);\n  }));\n  return _verifyJwt.apply(this, arguments);\n}\n\n//# sourceURL=webpack://epub_reader_backend/./helpers/jwt_helper.js?");

/***/ }),

/***/ "./helpers/mongodb_helper.js":
/*!***********************************!*\
  !*** ./helpers/mongodb_helper.js ***!
  \***********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   mongooseConnection: () => (/* binding */ mongooseConnection)\n/* harmony export */ });\n/* harmony import */ var dotenv_config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv/config.js */ \"dotenv/config.js\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mongoose */ \"mongoose\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\nvar mongooseConnection = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return mongoose__WEBPACK_IMPORTED_MODULE_1__.connect(\"mongodb+srv://admin:Mj84tPPvmbJwcrzO@cluster0.emxn4gt.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0\", {\n            retryWrites: true,\n            w: \"majority\"\n          });\n        case 2:\n          return _context.abrupt(\"return\", _context.sent);\n        case 3:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function mongooseConnection() {\n    return _ref.apply(this, arguments);\n  };\n}();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (mongoose__WEBPACK_IMPORTED_MODULE_1__);\n\n//# sourceURL=webpack://epub_reader_backend/./helpers/mongodb_helper.js?");

/***/ }),

/***/ "./helpers/totp.js":
/*!*************************!*\
  !*** ./helpers/totp.js ***!
  \*************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateTOTP: () => (/* binding */ generateTOTP),\n/* harmony export */   verifyTotp: () => (/* binding */ verifyTotp)\n/* harmony export */ });\n/* harmony import */ var otplib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! otplib */ \"otplib\");\n/* harmony import */ var _date_time_helper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./date_time_helper.js */ \"./helpers/date_time_helper.js\");\n\n\nvar generateTOTP = function generateTOTP(secret, purpose) {\n  var expiryTimeInMin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 60;\n  otplib__WEBPACK_IMPORTED_MODULE_0__.totp.options = {\n    digits: 6,\n    step: 30,\n    window: 600,\n    algorithm: \"sha1\"\n  };\n  var code = otplib__WEBPACK_IMPORTED_MODULE_0__.totp.generate(secret);\n  var expiresAt = (0,_date_time_helper_js__WEBPACK_IMPORTED_MODULE_1__.getCurrentUnix)() + expiryTimeInMin * 60;\n  var newOtpSecret = {\n    secret: secret,\n    purpose: purpose,\n    createdAt: (0,_date_time_helper_js__WEBPACK_IMPORTED_MODULE_1__.getCurrentUnix)(),\n    expiresAt: expiresAt\n  };\n  return {\n    code: code,\n    newOtpSecret: newOtpSecret\n  };\n};\nvar verifyTotp = function verifyTotp(otpSecret, code) {\n  otplib__WEBPACK_IMPORTED_MODULE_0__.totp.options = {\n    digits: 6,\n    step: 30,\n    window: 600,\n    algorithm: \"sha1\"\n  };\n  var isValid = otplib__WEBPACK_IMPORTED_MODULE_0__.totp.check(code, otpSecret === null || otpSecret === void 0 ? void 0 : otpSecret.secret);\n  if (otpSecret !== null && otpSecret !== void 0 && otpSecret.expiresAt && +otpSecret.expiresAt < (0,_date_time_helper_js__WEBPACK_IMPORTED_MODULE_1__.getCurrentUnix)()) return {\n    success: false,\n    message: \"OTP expired, please generate new OTP.\"\n  };\n  return {\n    success: isValid,\n    message: isValid ? \"Valid OTP, Verified successfully.\" : \"Invalid OTP, please try again !\"\n  };\n};\n\n//# sourceURL=webpack://epub_reader_backend/./helpers/totp.js?");

/***/ }),

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var cookie_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cookie-parser */ \"cookie-parser\");\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cors */ \"cors\");\n/* harmony import */ var dotenv_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dotenv/config.js */ \"dotenv/config.js\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! http */ \"http\");\n/* harmony import */ var _helpers_mongodb_helper_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./helpers/mongodb_helper.js */ \"./helpers/mongodb_helper.js\");\n/* harmony import */ var _routes_book_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./routes/book.js */ \"./routes/book.js\");\n/* harmony import */ var _routes_user_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./routes/user.js */ \"./routes/user.js\");\n\n\n\n\n\n\n\n\nvar app = express__WEBPACK_IMPORTED_MODULE_3__();\nvar server = http__WEBPACK_IMPORTED_MODULE_4__.Server(app);\napp.use(cors__WEBPACK_IMPORTED_MODULE_1__({\n  origin: \"*\"\n}));\napp.use(express__WEBPACK_IMPORTED_MODULE_3__.urlencoded({\n  extended: true\n}));\napp.use(express__WEBPACK_IMPORTED_MODULE_3__.json());\napp.use(cookie_parser__WEBPACK_IMPORTED_MODULE_0__());\napp.use(\"/files\", express__WEBPACK_IMPORTED_MODULE_3__[\"static\"](\"files\"));\napp.get(\"/\", function (req, res) {\n  return res.send(\"server is ready to serve!\");\n});\napp.use(\"/api/user\", _routes_user_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"]);\napp.use(\"/api/book\", _routes_book_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]);\n\n// running the server\ntry {\n  var port = \"8010\" || 0;\n  var db = await (0,_helpers_mongodb_helper_js__WEBPACK_IMPORTED_MODULE_5__.mongooseConnection)();\n  if (db) {\n    console.log(\"\\uD83D\\uDCC5 database connected https://cloud.mongodb.com/v2/666c8df2ca5ba457f69053f8#/overview\");\n    server.listen(port, function () {\n      console.log(\"\\uD83D\\uDC4D server started successfully http://localhost:\".concat(port));\n    });\n  }\n} catch (error) {\n  console.log(error);\n  console.timeEnd(\"\\uD83D\\uDC4E database connection has some problem : \".concat(JSON.stringify(error)));\n}\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } }, 1);\n\n//# sourceURL=webpack://epub_reader_backend/./index.js?");

/***/ }),

/***/ "./middleware/auth/dataAuth.js":
/*!*************************************!*\
  !*** ./middleware/auth/dataAuth.js ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   datAuth: () => (/* binding */ datAuth),\n/* harmony export */   validateJwtToken: () => (/* binding */ validateJwtToken)\n/* harmony export */ });\n/* harmony import */ var http_status_codes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! http-status-codes */ \"http-status-codes\");\n/* harmony import */ var joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! joi/lib/errors.js */ \"joi/lib/errors.js\");\n/* harmony import */ var _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../helpers/custom_error.js */ \"./helpers/custom_error.js\");\n/* harmony import */ var _helpers_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../helpers/index.js */ \"./helpers/index.js\");\n/* harmony import */ var _helpers_jwt_helper_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../helpers/jwt_helper.js */ \"./helpers/jwt_helper.js\");\n/* harmony import */ var _models_UserModel_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../models/UserModel.js */ \"./models/UserModel.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\n\n\n\n\nvar datAuth = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var _req$body$_id, _req$body, _req$params, _tokenData, _tokenData2, _tokenData3, reqIdUser, isValid;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          reqIdUser = (_req$body$_id = req === null || req === void 0 || (_req$body = req.body) === null || _req$body === void 0 ? void 0 : _req$body._id) !== null && _req$body$_id !== void 0 ? _req$body$_id : req === null || req === void 0 || (_req$params = req.params) === null || _req$params === void 0 ? void 0 : _req$params.id;\n          isValid = ((_tokenData = tokenData) === null || _tokenData === void 0 ? void 0 : _tokenData.role) === \"ADMIN\" || [\"USER\"].includes((_tokenData2 = tokenData) === null || _tokenData2 === void 0 ? void 0 : _tokenData2.role) && reqIdUser === ((_tokenData3 = tokenData) === null || _tokenData3 === void 0 ? void 0 : _tokenData3._id);\n          _context.next = 11;\n          break;\n        case 5:\n          _context.prev = 5;\n          _context.t0 = _context[\"catch\"](0);\n          if (!(_context.t0 instanceof joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_1__.ValidationError || _context.t0 instanceof _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError)) {\n            _context.next = 9;\n            break;\n          }\n          return _context.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_3__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST, _context.t0.message, 0)));\n        case 9:\n          console.error(_context.t0);\n          return _context.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_3__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR, \"Internal Server Error\", 0)));\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 5]]);\n  }));\n  return function datAuth(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar validateJwtToken = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res, next) {\n    var _req$cookies$userToke, _req$cookies, _req$cookies2, encToken, token, _tokenData4, user;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          encToken = (_req$cookies$userToke = req === null || req === void 0 || (_req$cookies = req.cookies) === null || _req$cookies === void 0 ? void 0 : _req$cookies.userToken) !== null && _req$cookies$userToke !== void 0 ? _req$cookies$userToke : req === null || req === void 0 || (_req$cookies2 = req.cookies) === null || _req$cookies2 === void 0 ? void 0 : _req$cookies2.adminToken;\n          if (encToken) {\n            _context2.next = 4;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError(\"Token not provided\");\n        case 4:\n          token = (0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_3__.decryptData)(encToken); // validate token\n          _context2.next = 7;\n          return (0,_helpers_jwt_helper_js__WEBPACK_IMPORTED_MODULE_4__.verifyJwt)(token);\n        case 7:\n          _tokenData4 = _context2.sent;\n          if (_tokenData4) {\n            _context2.next = 10;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError(\"Token verification failed\");\n        case 10:\n          _context2.next = 12;\n          return _models_UserModel_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].findById(_tokenData4 === null || _tokenData4 === void 0 ? void 0 : _tokenData4._id).lean().exec();\n        case 12:\n          user = _context2.sent;\n          if (user) {\n            _context2.next = 15;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError(\"User does not exist\");\n        case 15:\n          req.tokenData = _tokenData4;\n          next();\n          _context2.next = 25;\n          break;\n        case 19:\n          _context2.prev = 19;\n          _context2.t0 = _context2[\"catch\"](0);\n          if (!(_context2.t0 instanceof joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_1__.ValidationError || _context2.t0 instanceof _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError)) {\n            _context2.next = 23;\n            break;\n          }\n          return _context2.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_3__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST, _context2.t0.message, 0)));\n        case 23:\n          console.error(_context2.t0);\n          return _context2.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_3__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR, \"Internal Server Error\", 0)));\n        case 25:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 19]]);\n  }));\n  return function validateJwtToken(_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\n//# sourceURL=webpack://epub_reader_backend/./middleware/auth/dataAuth.js?");

/***/ }),

/***/ "./middleware/auth/index.js":
/*!**********************************!*\
  !*** ./middleware/auth/index.js ***!
  \**********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   verifyAdmin: () => (/* binding */ verifyAdmin),\n/* harmony export */   verifyUser: () => (/* binding */ verifyUser)\n/* harmony export */ });\n/* harmony import */ var http_status_codes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! http-status-codes */ \"http-status-codes\");\n/* harmony import */ var joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! joi/lib/errors.js */ \"joi/lib/errors.js\");\n/* harmony import */ var _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../helpers/custom_error.js */ \"./helpers/custom_error.js\");\n/* harmony import */ var _helpers_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../helpers/index.js */ \"./helpers/index.js\");\n/* harmony import */ var _models_UserModel_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../models/UserModel.js */ \"./models/UserModel.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\n\n\n\n\n// verify user\nvar verifyUser = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var _req$body, _req$params, _ref2, role, tokenUserId, requestUserId, userData;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _ref2 = (req === null || req === void 0 ? void 0 : req.tokenData) || {}, role = _ref2.role, tokenUserId = _ref2._id;\n          requestUserId = ((_req$body = req.body) === null || _req$body === void 0 ? void 0 : _req$body._id) || ((_req$params = req.params) === null || _req$params === void 0 ? void 0 : _req$params.id);\n          _context.next = 5;\n          return _models_UserModel_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].findById(tokenUserId).lean().exec();\n        case 5:\n          userData = _context.sent;\n          if (!(requestUserId && role === \"USER\" && tokenUserId !== requestUserId)) {\n            _context.next = 8;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError(\"UNAUTHORIZED\");\n        case 8:\n          req.user = userData;\n          next();\n          _context.next = 18;\n          break;\n        case 12:\n          _context.prev = 12;\n          _context.t0 = _context[\"catch\"](0);\n          if (!(_context.t0 instanceof joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_1__.ValidationError || _context.t0 instanceof _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError)) {\n            _context.next = 16;\n            break;\n          }\n          return _context.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_3__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST, _context.t0.message, 0)));\n        case 16:\n          console.error(_context.t0);\n          return _context.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_3__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR, \"Internal Server Error\", 0)));\n        case 18:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 12]]);\n  }));\n  return function verifyUser(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n// verify admin\nvar verifyAdmin = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res, next) {\n    var _req$tokenData, isValid;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          isValid = [\"ADMIN\"].includes(req === null || req === void 0 || (_req$tokenData = req.tokenData) === null || _req$tokenData === void 0 ? void 0 : _req$tokenData.role);\n          if (isValid) {\n            _context2.next = 4;\n            break;\n          }\n          throw new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError(\"Protected route, only for admins\");\n        case 4:\n          next();\n          _context2.next = 13;\n          break;\n        case 7:\n          _context2.prev = 7;\n          _context2.t0 = _context2[\"catch\"](0);\n          if (!(_context2.t0 instanceof joi_lib_errors_js__WEBPACK_IMPORTED_MODULE_1__.ValidationError || _context2.t0 instanceof _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_2__.CustomError)) {\n            _context2.next = 11;\n            break;\n          }\n          return _context2.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_3__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.BAD_REQUEST, _context2.t0.message, 0)));\n        case 11:\n          console.error(_context2.t0);\n          return _context2.abrupt(\"return\", res.status(http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR).send((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_3__.responseGenerator)({}, http_status_codes__WEBPACK_IMPORTED_MODULE_0__.StatusCodes.INTERNAL_SERVER_ERROR, \"Internal Server Error\", 0)));\n        case 13:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 7]]);\n  }));\n  return function verifyAdmin(_x4, _x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\n//# sourceURL=webpack://epub_reader_backend/./middleware/auth/index.js?");

/***/ }),

/***/ "./middleware/fileUpload/upload.js":
/*!*****************************************!*\
  !*** ./middleware/fileUpload/upload.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   upload: () => (/* binding */ upload)\n/* harmony export */ });\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs-extra */ \"fs-extra\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! multer */ \"multer\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../helpers/custom_error.js */ \"./helpers/custom_error.js\");\n\n\n\n\nvar storage = multer__WEBPACK_IMPORTED_MODULE_1__.diskStorage({\n  destination: function destination(req, file, callback) {\n    var _req$user, _req$user2;\n    var path = \"files/\".concat(req === null || req === void 0 || (_req$user = req.user) === null || _req$user === void 0 ? void 0 : _req$user.created_at, \"_\").concat(req === null || req === void 0 || (_req$user2 = req.user) === null || _req$user2 === void 0 ? void 0 : _req$user2.name, \"/\");\n    fs_extra__WEBPACK_IMPORTED_MODULE_0__.mkdirSync(path, {\n      recursive: true\n    });\n    callback(null, path);\n  },\n  filename: function filename(req, file, callback) {\n    var name = path__WEBPACK_IMPORTED_MODULE_2__.extname(file.originalname);\n    callback(null, Date.now() + name);\n  }\n});\nvar upload = multer__WEBPACK_IMPORTED_MODULE_1__({\n  storage: storage,\n  fileFilter: function fileFilter(req, file, callback) {\n    if (file.mimetype === \"application/epub+zip\") callback(null, true);else {\n      callback(new _helpers_custom_error_js__WEBPACK_IMPORTED_MODULE_3__.CustomError(\"Error, Only epub file is allowed\"), false);\n    }\n  },\n  limits: {\n    fileSize: 1024 * 1024 * 2 // 2 mb\n  }\n});\n\n//# sourceURL=webpack://epub_reader_backend/./middleware/fileUpload/upload.js?");

/***/ }),

/***/ "./models/BookModel.js":
/*!*****************************!*\
  !*** ./models/BookModel.js ***!
  \*****************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var _helpers_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/index.js */ \"./helpers/index.js\");\n\n\nvar BookSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n  _id: {\n    type: String,\n    required: true,\n    trim: true,\n    \"default\": _helpers_index_js__WEBPACK_IMPORTED_MODULE_1__.generatePublicId\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  lastReadPage: {\n    type: Number,\n    \"default\": 0\n  },\n  lastReadAt: {\n    type: String\n  },\n  bookPath: {\n    type: String\n  },\n  thumbnail: {\n    type: String\n  },\n  created_by: {\n    type: String\n  },\n  created_at: {\n    type: String\n  },\n  updated_at: {\n    type: String\n  }\n});\nvar BookModel = mongoose__WEBPACK_IMPORTED_MODULE_0__.model(\"books\", BookSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BookModel);\n\n//# sourceURL=webpack://epub_reader_backend/./models/BookModel.js?");

/***/ }),

/***/ "./models/UserModel.js":
/*!*****************************!*\
  !*** ./models/UserModel.js ***!
  \*****************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var _helpers_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/index.js */ \"./helpers/index.js\");\n\n\nvar UserSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n  _id: {\n    type: String,\n    required: true,\n    trim: true,\n    \"default\": _helpers_index_js__WEBPACK_IMPORTED_MODULE_1__.generatePublicId\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  phone: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  password: {\n    type: String\n  },\n  otpSecret: {\n    type: Object,\n    \"default\": null\n  },\n  created_at: {\n    type: String\n  },\n  updated_at: {\n    type: String\n  },\n  isDeleted: {\n    type: Boolean,\n    \"default\": false\n  }\n});\nvar UserModel = mongoose__WEBPACK_IMPORTED_MODULE_0__.model(\"users\", UserSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UserModel);\n\n//# sourceURL=webpack://epub_reader_backend/./models/UserModel.js?");

/***/ }),

/***/ "./routes/book.js":
/*!************************!*\
  !*** ./routes/book.js ***!
  \************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var _controllers_book_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../controllers/book/index.js */ \"./controllers/book/index.js\");\n/* harmony import */ var _middleware_auth_dataAuth_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middleware/auth/dataAuth.js */ \"./middleware/auth/dataAuth.js\");\n/* harmony import */ var _middleware_auth_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../middleware/auth/index.js */ \"./middleware/auth/index.js\");\n/* harmony import */ var _middleware_fileUpload_upload_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../middleware/fileUpload/upload.js */ \"./middleware/fileUpload/upload.js\");\n\n\n\n\n\nvar bookRouter = (0,express__WEBPACK_IMPORTED_MODULE_0__.Router)();\n\n// create\n// method: POST\n// url: /api/book\nbookRouter.post(\"/:id\", _middleware_auth_dataAuth_js__WEBPACK_IMPORTED_MODULE_2__.validateJwtToken, _middleware_auth_index_js__WEBPACK_IMPORTED_MODULE_3__.verifyUser, _middleware_fileUpload_upload_js__WEBPACK_IMPORTED_MODULE_4__.upload.single(\"book\"), _controllers_book_index_js__WEBPACK_IMPORTED_MODULE_1__.createBook);\n\n// update\n// method: PUT\n// url: /api/book\n// --------------------\n// delete\n// method: DELETE\n// url: /api/book\nbookRouter.route(\"/all\").get(_middleware_auth_dataAuth_js__WEBPACK_IMPORTED_MODULE_2__.validateJwtToken, _middleware_auth_index_js__WEBPACK_IMPORTED_MODULE_3__.verifyUser, _controllers_book_index_js__WEBPACK_IMPORTED_MODULE_1__.getAllBooks);\n\n// get-currently-reading\n// method: GET\n// url: /api/book/to-read\nbookRouter.get(\"/to-read\", _middleware_auth_dataAuth_js__WEBPACK_IMPORTED_MODULE_2__.validateJwtToken, _middleware_auth_index_js__WEBPACK_IMPORTED_MODULE_3__.verifyUser, _controllers_book_index_js__WEBPACK_IMPORTED_MODULE_1__.getToReadBooks);\n\n// get-currently-reading\n// method: GET\n// url: /api/book/currently-reading\nbookRouter.get(\"/currently-reading\", _middleware_auth_dataAuth_js__WEBPACK_IMPORTED_MODULE_2__.validateJwtToken, _middleware_auth_index_js__WEBPACK_IMPORTED_MODULE_3__.verifyUser, _controllers_book_index_js__WEBPACK_IMPORTED_MODULE_1__.getCurrentlyReadingBooks);\n\n// read\n// method: GET\n// url: /api/book/:id\nbookRouter.route(\"/:id\").get(_middleware_auth_dataAuth_js__WEBPACK_IMPORTED_MODULE_2__.validateJwtToken, _middleware_auth_index_js__WEBPACK_IMPORTED_MODULE_3__.verifyUser, _controllers_book_index_js__WEBPACK_IMPORTED_MODULE_1__.getBook)[\"delete\"](_middleware_auth_dataAuth_js__WEBPACK_IMPORTED_MODULE_2__.validateJwtToken, _middleware_auth_index_js__WEBPACK_IMPORTED_MODULE_3__.verifyUser, _controllers_book_index_js__WEBPACK_IMPORTED_MODULE_1__.deleteBook);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (bookRouter);\n\n//# sourceURL=webpack://epub_reader_backend/./routes/book.js?");

/***/ }),

/***/ "./routes/user.js":
/*!************************!*\
  !*** ./routes/user.js ***!
  \************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var _controllers_user_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../controllers/user/index.js */ \"./controllers/user/index.js\");\n/* harmony import */ var _middleware_auth_dataAuth_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middleware/auth/dataAuth.js */ \"./middleware/auth/dataAuth.js\");\n/* harmony import */ var _middleware_auth_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../middleware/auth/index.js */ \"./middleware/auth/index.js\");\n\n\n\n\nvar userRouter = (0,express__WEBPACK_IMPORTED_MODULE_0__.Router)();\n\n// login\n// method: POST\n// url: /api/user/login\nuserRouter.post(\"/login\", _controllers_user_index_js__WEBPACK_IMPORTED_MODULE_1__.loginUser);\n\n// create\n// method: POST\n// url: /api/user\n// ------------------\n// update\n// method: PUT\n// url: /api/user\n// ------------------\n// delete\n// method: DELETE\n// url: /api/user\nuserRouter.route(\"/\").post(_controllers_user_index_js__WEBPACK_IMPORTED_MODULE_1__.createNewUser).put(_middleware_auth_dataAuth_js__WEBPACK_IMPORTED_MODULE_2__.validateJwtToken, _middleware_auth_index_js__WEBPACK_IMPORTED_MODULE_3__.verifyUser, _controllers_user_index_js__WEBPACK_IMPORTED_MODULE_1__.updateUser)[\"delete\"](_middleware_auth_dataAuth_js__WEBPACK_IMPORTED_MODULE_2__.validateJwtToken, _middleware_auth_index_js__WEBPACK_IMPORTED_MODULE_3__.verifyUser, _controllers_user_index_js__WEBPACK_IMPORTED_MODULE_1__.deleteUser);\n\n// user_info\n// method: GET\n// url: /api/user/:id\nuserRouter.get(\"/:id\", _controllers_user_index_js__WEBPACK_IMPORTED_MODULE_1__.getUser);\n\n// forget password := 1\n// method: POST\n// url: /api/user/forgetPassword\nuserRouter.post(\"/forgetPassword\", _controllers_user_index_js__WEBPACK_IMPORTED_MODULE_1__.generateForgetPasswordRequest);\n\n// forget password := 2\n// method: POST\n// url: /api/user/resetPassword\nuserRouter.post(\"/resetPassword\", _controllers_user_index_js__WEBPACK_IMPORTED_MODULE_1__.validateForgetPasswordRequest);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (userRouter);\n\n//# sourceURL=webpack://epub_reader_backend/./routes/user.js?");

/***/ }),

/***/ "./utils/index.js":
/*!************************!*\
  !*** ./utils/index.js ***!
  \************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generatePassword: () => (/* binding */ generatePassword),\n/* harmony export */   paginate: () => (/* binding */ paginate)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar generatePassword = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          return _context.abrupt(\"return\", new Promise(function (resolve) {\n            var length = 8;\n            var charset = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n            var password = \"\";\n            for (var i = 0; i < length; i++) {\n              var randomIndex = Math.floor(Math.random() * charset.length);\n              password += charset.charAt(randomIndex);\n            }\n            resolve(password);\n          }));\n        case 1:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function generatePassword() {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar paginate = function paginate(options) {\n  var sort = {};\n  if (options !== null && options !== void 0 && options.sort_column) {\n    var sortColumn = options === null || options === void 0 ? void 0 : options.sort_column;\n    var order = options && (options === null || options === void 0 ? void 0 : options.sort_order) === \"1\" || options && (options === null || options === void 0 ? void 0 : options.sort_order) == \"asc\" ? 1 : -1;\n    sort[sortColumn] = order;\n  } else {\n    sort.created_at = -1;\n  }\n  var limit = +(options === null || options === void 0 ? void 0 : options.limit) ? +(options === null || options === void 0 ? void 0 : options.limit) : 10;\n  var offset = ((+(options === null || options === void 0 ? void 0 : options.offset) ? +(options === null || options === void 0 ? void 0 : options.offset) : 1) - 1) * (+limit ? +limit : 10);\n  return {\n    sort: sort,\n    offset: offset,\n    limit: limit\n  };\n};\n\n//# sourceURL=webpack://epub_reader_backend/./utils/index.js?");

/***/ }),

/***/ "./validations/book/index.js":
/*!***********************************!*\
  !*** ./validations/book/index.js ***!
  \***********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteBookValidation: () => (/* binding */ deleteBookValidation),\n/* harmony export */   getBookValidation: () => (/* binding */ getBookValidation)\n/* harmony export */ });\n/* harmony import */ var joi__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! joi */ \"joi\");\n\nvar getBookValidation = joi__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: joi__WEBPACK_IMPORTED_MODULE_0__.string().required(\"ID is required to fetch the book\")\n});\nvar deleteBookValidation = joi__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: joi__WEBPACK_IMPORTED_MODULE_0__.string().required(\"BookID is required\")\n});\n\n//# sourceURL=webpack://epub_reader_backend/./validations/book/index.js?");

/***/ }),

/***/ "./validations/user/index.js":
/*!***********************************!*\
  !*** ./validations/user/index.js ***!
  \***********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createUserValidation: () => (/* binding */ createUserValidation),\n/* harmony export */   deleteUserValidation: () => (/* binding */ deleteUserValidation),\n/* harmony export */   getUserValidation: () => (/* binding */ getUserValidation),\n/* harmony export */   updateUserValidation: () => (/* binding */ updateUserValidation),\n/* harmony export */   userLoginValidation: () => (/* binding */ userLoginValidation)\n/* harmony export */ });\n/* harmony import */ var joi__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! joi */ \"joi\");\n\nvar createUserValidation = joi__WEBPACK_IMPORTED_MODULE_0__.object({\n  name: joi__WEBPACK_IMPORTED_MODULE_0__.string().required().messages({\n    \"any.required\": \"Please provide the valid name\",\n    \"string.base\": \"Please provide the valid name\"\n  }),\n  email: joi__WEBPACK_IMPORTED_MODULE_0__.string().email().required(),\n  phone: joi__WEBPACK_IMPORTED_MODULE_0__.string().min(7).max(12).pattern(/^[0-9]+$/).required(),\n  password: joi__WEBPACK_IMPORTED_MODULE_0__.string().required()\n});\nvar updateUserValidation = joi__WEBPACK_IMPORTED_MODULE_0__.object({\n  _id: joi__WEBPACK_IMPORTED_MODULE_0__.string().required(),\n  name: joi__WEBPACK_IMPORTED_MODULE_0__.string().required().messages({\n    \"any.required\": \"Please provide the valid name\",\n    \"string.base\": \"Please provide the valid name\"\n  }),\n  email: joi__WEBPACK_IMPORTED_MODULE_0__.string().email().required(),\n  phone: joi__WEBPACK_IMPORTED_MODULE_0__.string().min(7).max(12).pattern(/^[0-9]+$/).required(),\n  password: joi__WEBPACK_IMPORTED_MODULE_0__.string().required()\n});\nvar deleteUserValidation = joi__WEBPACK_IMPORTED_MODULE_0__.object({\n  _id: joi__WEBPACK_IMPORTED_MODULE_0__.string().required(\"userID required to delete the user\"),\n  password: joi__WEBPACK_IMPORTED_MODULE_0__.string().required(\"Enter your password to delete the account\")\n});\nvar getUserValidation = joi__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: joi__WEBPACK_IMPORTED_MODULE_0__.string().required(\"userID is required to fetch user information\")\n});\nvar userLoginValidation = joi__WEBPACK_IMPORTED_MODULE_0__.object({\n  eop: joi__WEBPACK_IMPORTED_MODULE_0__.alternatives()[\"try\"](joi__WEBPACK_IMPORTED_MODULE_0__.string().email().message(\"Please provide a valid email address\"), joi__WEBPACK_IMPORTED_MODULE_0__.string().pattern(/^[0-9]{10,15}$/).message(\"Please provide a valid phone number\")).required().messages({\n    \"any.required\": \"Please provide an email or phone number\"\n  }),\n  password: joi__WEBPACK_IMPORTED_MODULE_0__.string().required().messages({\n    \"any.required\": \"Please provide a password\",\n    \"string.base\": \"Password must be a string\"\n  })\n});\n\n//# sourceURL=webpack://epub_reader_backend/./validations/user/index.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/async module */
/******/ 	(() => {
/******/ 		var webpackQueues = typeof Symbol === "function" ? Symbol("webpack queues") : "__webpack_queues__";
/******/ 		var webpackExports = typeof Symbol === "function" ? Symbol("webpack exports") : "__webpack_exports__";
/******/ 		var webpackError = typeof Symbol === "function" ? Symbol("webpack error") : "__webpack_error__";
/******/ 		var resolveQueue = (queue) => {
/******/ 			if(queue && queue.d < 1) {
/******/ 				queue.d = 1;
/******/ 				queue.forEach((fn) => (fn.r--));
/******/ 				queue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));
/******/ 			}
/******/ 		}
/******/ 		var wrapDeps = (deps) => (deps.map((dep) => {
/******/ 			if(dep !== null && typeof dep === "object") {
/******/ 				if(dep[webpackQueues]) return dep;
/******/ 				if(dep.then) {
/******/ 					var queue = [];
/******/ 					queue.d = 0;
/******/ 					dep.then((r) => {
/******/ 						obj[webpackExports] = r;
/******/ 						resolveQueue(queue);
/******/ 					}, (e) => {
/******/ 						obj[webpackError] = e;
/******/ 						resolveQueue(queue);
/******/ 					});
/******/ 					var obj = {};
/******/ 					obj[webpackQueues] = (fn) => (fn(queue));
/******/ 					return obj;
/******/ 				}
/******/ 			}
/******/ 			var ret = {};
/******/ 			ret[webpackQueues] = x => {};
/******/ 			ret[webpackExports] = dep;
/******/ 			return ret;
/******/ 		}));
/******/ 		__webpack_require__.a = (module, body, hasAwait) => {
/******/ 			var queue;
/******/ 			hasAwait && ((queue = []).d = -1);
/******/ 			var depQueues = new Set();
/******/ 			var exports = module.exports;
/******/ 			var currentDeps;
/******/ 			var outerResolve;
/******/ 			var reject;
/******/ 			var promise = new Promise((resolve, rej) => {
/******/ 				reject = rej;
/******/ 				outerResolve = resolve;
/******/ 			});
/******/ 			promise[webpackExports] = exports;
/******/ 			promise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise["catch"](x => {}));
/******/ 			module.exports = promise;
/******/ 			body((deps) => {
/******/ 				currentDeps = wrapDeps(deps);
/******/ 				var fn;
/******/ 				var getResult = () => (currentDeps.map((d) => {
/******/ 					if(d[webpackError]) throw d[webpackError];
/******/ 					return d[webpackExports];
/******/ 				}))
/******/ 				var promise = new Promise((resolve) => {
/******/ 					fn = () => (resolve(getResult));
/******/ 					fn.r = 0;
/******/ 					var fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));
/******/ 					currentDeps.map((dep) => (dep[webpackQueues](fnQueue)));
/******/ 				});
/******/ 				return fn.r ? promise : getResult();
/******/ 			}, (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue)));
/******/ 			queue && queue.d < 0 && (queue.d = 0);
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./index.js");
/******/ 	
/******/ })()
;